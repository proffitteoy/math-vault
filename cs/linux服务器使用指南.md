
# **第 0 章 服务器使用总览**

服务器为 Linux 系统，无图形桌面环境，只能通过终端进行操作与维护（所见皆是文件）。  
如需访问 Docker、Dify 等 Web 服务，需要部署并放通端口后，使用本地浏览器访问。

---

## **1.1 登录规范**

|要求|原因|
|---|---|
|禁止 root 远程登录|减少权限泄露风险|
|使用统一账号 `gzs` 登录|权限可控、便于审计|
|密码长期有效但应妥善保密|避免泄露与非法访问|

---

## **1.2 权限管理**

- 日常操作使用普通用户账号
    
- 需特权操作再使用 sudo 临时提权
    
- 遵循**最小权限原则**
    

sudo 示例：

```kali
sudo netdiscover -r 192.168.80.0/24
```

（此命令与当前业务无关，仅作示例）

---

# **第 2 章 服务器访问与工具使用（MobaXterm）**

## **2.1 登录流程**

1. 打开 MobaXterm
    
2. Session → SSH
    
3. 配置服务器 IP、用户名、密钥
    
4. 连接后进入终端（Shell）
    

目前已配置完成，打开 MobaXterm 即可直接使用。

---

## **2.2 文件传输**

MobaXterm 左侧支持 SFTP 文件拖放上传/下载  
图形化操作，建议优先使用。

> ⚠ 上传至用户目录，涉及系统目录操作时仅允许 sudo 进行移动处理

---

# **第 3 章 Linux 基础操作规范**

### 常用命令表

|操作|命令|说明|
|---|---|---|
|查看当前目录列表|`ls -lh`|显示权限与大小|
|切换目录|`cd /path`|—|
|查看当前路径|`pwd`|—|
|创建目录|`mkdir -p /opt/app`|支持递归创建|
|删除文件|`rm file`|谨慎使用|
|实时查看日志|`tail -f xxx.log`|排查服务异常|

> 所有操作遵循：最小变更原则、可回退原则

---

# **第 4 章 系统监控与资源巡检**

等效于 Windows“任务管理器”

|指标|命令|判断依据|
|---|---|---|
|CPU、进程占用|`top` / `htop`|高占用要排查|
|内存使用情况|`free -h`|swap 持续上升需报警|
|磁盘占用|`df -h`|≥ 80% 上报|
|网络端口监听|`ss -tulnp`|确认合法性|
|系统平均负载|`uptime`|Load > 核心数异常|

---

### **巡检阈值与动作**

|指标|阈值|行为|
|---|---|---|
|磁盘使用率|≥ 80%|上报管理员|
|内存占用率|持续 >90%|定位进程|
|负载|> CPU 核心数 × 1.5|性能诊断|

---

# **第 5 章 文件上传与下载**

## **5.1 拖拽传输（推荐）**

- 在左侧 SFTP 面板拖入 → 上传
    
- 拖到本地 → 下载
    

### 上传权限说明

建议上传至：

```
/home/gzs/   or   /tmp/
```

再通过 sudo 提权移动。

---

## **5.2 SCP 命令行方式（备用）**

上传：

```bash
scp local.file gzs@IP:/home/gzs/
```

压缩传输（建议大文件）：

```bash
tar -zcvf app.tar.gz /opt/app
```

---

## **5.3 安全要求**

|内容|要求|
|---|---|
|系统关键目录操作须审批|/etc /usr /lib 等|
|敏感配置加密传输|凭证、数据库密码等|
|上传脚本必须来源可信|避免安全隐患|

---

# **第 6 章 文件编写与配置变更**

## **6.1 文件编辑方式**

|场景|推荐方式|
|---|---|
|大型配置或代码|VSCode SSH Remote|
|快速修配置|服务器终端 vi|

> 当前服务器**不支持 vim/nano**，仅 vi 可用

---

### **vi 操作示例：编辑 Nginx 配置**

```bash
sudo vi /etc/nginx/nginx.conf
```

- 方向键移动
    
- 按 `i` 进入编辑
    
- 编辑后：按 `Esc` → `:wq` 保存退出
    

常用快捷键：

|命令|说明|
|---|---|
|`/keyword`|搜索|
|`dd`|删除一行|
|`u`|撤销|
|`:q!`|放弃修改|
|`:wq!`|强制保存退出|

---

## **6.2 配置变更管理**

|项目|要求|
|---|---|
|编辑前必须备份 `.bak`|可回滚|
|注释记录变更说明|操作者 / 日期 / 目的|
|提交操作日志|便于审计|

---

# **第 7 章 应急处理流程**

目的：确保突发事件可控，避免二次损害。

---

## **7.1 事件分级响应**

|级别|事件类型|行动要求|
|---|---|---|
|S1|服务完全不可用 / 数据损坏|立即上报 + 停止写入|
|S2|服务部分异常|状态检查后汇报|
|S3|性能下降 / 无业务影响|记录并交管理员处理|

---

## **7.2 常见故障处理**

|现象|操作|禁止行为|
|---|---|---|
|服务挂起|`systemctl status` 检查|不得随意 restart|
|磁盘告警|`df -h` 诊断|不得删除系统日志|
|性能过载|`top` 定位进程|不得 kill 关键进程|
|网络异常|`ping`、`ss -tulnp`|不得随意更改网络设置|

---

## **7.3 异常攻击响应机制（必须执行）**

触发标准：

- 暴力破解尝试明显增多
    
- 出现未知端口或恶意进程
    
- 网络连接数激增
    
- 安全日志提示入侵行为
    

立即执行**断网隔离**：

```bash
sudo nmcli networking off
```

后续动作：

1. **立即电话**通知管理员
    
2. 禁止重启系统
    
3. 禁止删除、备份任何数据
    
4. 禁止自行溯源排查
    

> 所有进一步操作由管理员与安全人员执行
